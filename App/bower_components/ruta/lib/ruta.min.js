!function(t,n){"use strict";null==t&&(t="undefined"!=typeof window&&"undefined"!=typeof document?window:global),t.ruta=n(t)}(this,function(t){"use strict";function n(){return null==m&&(m=new w(b)),m}var r,e=t.mask||Mask,i=!0,u=Array.prototype.slice;!function(){r=function(){var t=u.call(arguments);console.error.apply(console,["Ruta"].concat(t))}}();var o,a,c,l;!function(){function t(t){for(var n,r,e=t.trim().split(/\s+/),i=e.length,u=-1;++u<i;)if(r=e[u],0!==r.length&&(n=r[0],'"'===n||"'"===n))for(var o=u;i>u;u++)if(r=e[u],r[r.length-1]===n){var a=e.splice(o,u-o+1).join(" ").slice(1,-1);e.splice(o,0,a),i=e.length;break}return e}function n(t){for(var n,r,e,i=t.length,u=0,o={},a=[];i>u;u++)e=t[u],"-"!==e[0]?a.push(e):(n=e.replace(/^[\-]+/,""),i-1>u&&"-"!==t[u+1][0]?(r=t[u+1],u++):r=!0,o[n]=r);return{path:a,query:o}}o=function(t){for(var n=t.length,r=0,e=n-1;n>r&&"/"===t[r];r++);for(;e>r&&"/"===t[e];e--);return t.substring(r,e+1)},a=function(t){return t=o(t),""===t?[]:t.split("/")},c=function(t){return"/"+t.join("/")},l=function(r){"string"==typeof r&&(r=t(r));var e=n(r);return d(e)}}();var s,f;!function(){function t(t,n,r){for(var e,i=n.split("."),u=i.length,o=-1;++o<u-1;)e=i[o],null==t[e]&&(t[e]={}),t=t[e];t[i[o]]=r}function n(t){try{return decodeURIComponent(t)}catch(n){return r("decode:URI malformed"),""}}function e(t){try{return encodeURIComponent(t)}catch(n){return r("encode:URI malformed"),""}}s=function(r,e){null==e&&(e="&");for(var i,u,o={},a=r.split(e),c=0,l=a.length;l>c;c++)i=a[c].split("="),u=null==i[1]?"":n(i[1]),t(o,i[0],u);return o},f=function(t,n){null==n&&(n="&");var r,i,u="";for(r in t)i=t[r],null!=i&&("boolean"==typeof i&&(i=null),u=u+(u?n:"")+r,null!=i&&(u+="="+e(i)));return u}}();var h,p,g;!function(){h=function(t,n){return new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n)},p=function(t){if("^"===t[0])return new RegExp(t);for(var n=t.split("|"),r=0,e=n.length;e>r;r++)n[r]="^"+n[r]+"$";return new RegExp(n.join("|"))},g=function(t){var n=t.indexOf("("),e=t.lastIndexOf(")");if(-1===n||-1===e)return r("Expected alias part with regexp",t),null;var i=t.substring(n+1,e);return{alias:t.substring(1,n),matcher:p(i)}}}();var d,v;!function(){d=function(t){var n=c(t.path);return null==t.query?n:n+"?"+f(t.query,"&")},v=function(t){var n=t.indexOf("?"),r=-1===n?t:t.substring(0,n);return{path:a(r),query:-1===n?null:s(t.substring(n+1),"&")}}}();var m,y=function(){function t(t,n){this.method=36===t.charCodeAt(0)?t.substring(1,t.indexOf(" ")).toUpperCase():null,null!=this.method&&(t=t.substring(this.method.length+2)),this.strict=i,this.value=n,this.definition=t,e(this,t)}function n(){this.routes=[]}var e,u;!function(){function t(t,n){for(var r in t)if(n.test(r))return t[r]}e=function(t,n){var e=n.charCodeAt(0);switch(e){case 33:t.strict=!0,n=n.substring(1);break;case 94:t.strict=!1,n=n.substring(1);break;case 40:var i=1,u=n.length-1;return 41!==n.charCodeAt(n.length-1)&&(r("parser - expect group closing"),u++),void(t.match=new RegExp(n.substring(i,u)))}var o,a,c,l,s,f,h=n.split("/"),g=0,d=h.length,v=h[d-1];a=v.indexOf("?"),a>(1===d?-1:0)&&(o=v.substring(a+1),h[d-1]=v.substring(0,a));for(var m,y,w,b=!0,x=t.path=[];d>g;g++)if(c=h[g],""!==c){l=c.charCodeAt(0),f=c.charCodeAt(1),m=63===l,y=58===(m?f:l),s=0,m&&s++,y&&s++,0!==s&&(c=c.substring(s)),m||b||r("Strict part found after optional",n),m&&(b=!1);var q=c.indexOf("(");if(y&&-1!==q){var u=c.length-1;")"!==c[u]&&(u+=1),w=new RegExp(p(c.substring(q+1,u))),c=c.substring(0,q)}m||y?y&&x.push({alias:c,matcher:w,optional:m}):x.push(c)}if(o){var R=t.query={};h=o.split("&"),g=-1,d=h.length;for(var C,A,O,E;++g<d;)O=h[g],E=O.indexOf("="),-1!==E?(C=O.substring(0,E),A=O.substring(E+1),40===A.charCodeAt(0)&&(A=new RegExp(p(A))),R[C]=A):R[O]="";0===t.path.length&&(t.strict=!1)}},u=function(n,r){var e=r.indexOf("?"),i=-1===e?null:r.substring(e+1),u={path:r,params:null==i?{}:s(i,"&")};if(n.query)for(var o in n.query)if("?"===o[0]&&(o=o.substring(1)),":"===o[0]){var c=g(o),l=c.alias;u.params[l]=t(u.params,c.matcher)}if(-1!==e&&(r=r.substring(0,e)),null!=n.path)for(var f,h,p=a(r),d=n.path,v=d.length,m=p.length,y=0;m>y;y++)if(f=p[y],h=v>y?d[y]:null){if("string"==typeof h)continue;if(h.alias){u.params[h.alias]=f;continue}}return u}}();var o,c;!function(){function t(t,n){for(var r in t)if(n.test(r))return!0;return!1}o=function(t,n,r){for(var e,i=v(t),o=0,a=n.length;a>o;o++)if(e=n[o],c(i,e,r))return e.current=u(e,t),e;return null},c=function(n,r,e){if(null!=e&&null!=r.method&&r.method!==e)return!1;if(r.match)return r.match.test("string"==typeof n?n:d(n));if("string"==typeof n&&(n=v(n)),r.query){var i,u,o=n.query;if(null==o)return!1;for(i in r.query){u=r.query[i];var a=i[0];if(":"!==a){if("?"!==a)if("string"!=typeof u){if(u.test&&!u.test(o[i]))return!1}else{if(null==o[i])return!1;if(u&&o[i]!==u)return!1}}else{var c=g(i);if(null==c||t(o,c.matcher)===!1)return!1}}}var l=r.path,s=l.length;if(0===s)return r.strict?0===n.path.length:!0;for(var f,h=0,p=n.path.length;p>h;h++){if(f=l[h],h>=s)return r.strict!==!0;if("string"==typeof f){if(n.path[h]===f)continue;return!1}if(f.matcher&&f.matcher.test(n.path[h])===!1)return!1;if(f.optional)return!0;if(!f.alias)return!1}return s>h?l[h].optional===!0:!0}}();return t.prototype={path:null,query:null,value:null,current:null},n.prototype={add:function(n,r){return this.routes.push(new t(n,r)),this},get:function(t,n){return o(t,this.routes,n)},clear:function(){return this.routes.length=0,this}},n.parse=function(t,n){var r={};return e(r,t),u(r,n)},n}(),w=function(){function t(t){if("undefined"==typeof window||"onhashchange"in window==!1)return null;var n=this;return n.listener=t,window.onhashchange=function(){n.changed(location.hash)},n}function n(t){if("undefined"==typeof window)return null;if(!window.history||!window.history.pushState)return null;var n=this;return n.listener=t,n.initial=location.pathname,window.onpopstate=function(){return n.initial===location.pathname?void(n.initial=null):void n.changed()},n}function e(e,i){if(this.collection=e||new y,i){var u="hash"===i?t:n;this.emitter=new u(this)}null==this.emitter&&(this.emitter=new n(this)),null==this.emitter&&(this.emitter=new t(this)),null==this.emitter&&r("Router can not be initialized - (nor HistoryAPI / nor hashchange")}return"undefined"==typeof window?function(){}:(function(){function n(t){return t.replace(/^[!#/]+/,"/")}t.prototype={navigate:function(t){return null==t?void this.changed(location.hash):void(location.hash=t)},changed:function(t){this.listener.changed(n(t))},current:function(){return n(location.hash)}}}(),function(){n.prototype={navigate:function(t){return null==t?void this.changed():(history.pushState({},null,t),void this.changed())},changed:function(){this.listener.changed(location.pathname+location.search)},current:function(){return location.pathname+location.search}}}(),e.prototype={changed:function(t){var n=this.collection.get(t);n&&this.action(n)},action:function(t){"function"==typeof t.value&&t.value(t)},navigate:function(t){this.emitter.navigate(t)},current:function(){return this.collection.get(this.currentPath())},currentPath:function(){return this.emitter.current()}},e)}(),b=new y,x={Collection:y,setRouterType:function(t){return null==m&&(m=new w(b,t)),this},setStrictBehaviour:function(t){i=t},add:function(t,r){return n(),b.add(t,r)},get:function(t){return b.get(t)},navigate:function(t){n().navigate(t)},current:function(){return n().current()},currentPath:function(){return n().currentPath()},parse:y.parse,$utils:{pathFromCLI:l,query:{serialize:f,deserialize:s}}};return function(){function t(t){t.preventDefault(),t.stopPropagation(),x.navigate(this.href)}e.registerAttrHandler("x-dynamic",function(n,r,e,i,u){u.onclick=t},"client")}(),x});
//# sourceMappingURL=ruta.min.js.map