{"version":3,"file":"localization.js","sources":["localization.js"],"names":["root","factory","_global","_exports","exports","global","window","$L","module","this","rgx_find","str","rgx","groupNumber","match","exec","Deferred","NodeLocalizer","console","warn","localizer_create","lang_SUPPORT","_Array_slice","Array","prototype","slice","is_Browser","document","is_Node","include","atma","mask","Class","require","__format","Formatter","$utils","format","Error","obj_getProperty","obj_setProperty","obj_extend","obj","property","chain","split","imax","length","i","value","key","target","source","val","log_error","args","call","arguments","unshift","log","apply","detect_fromBrowser","detect_fromRequest","fromSearch","search","lang","location","navigator","language","toLowerCase","lang_contains","req","langs","queryIndex","url","indexOf","substring","headers","replace","index","x","array","lang_extend","lang_tryLoad","languages","isoCode","translations","callback","params","route","support","path","SourceFactory","loadSingle","done","loadAll","dfr_bind","dfr","arguments_","listeners","push","dfr_clearListeners","_done","_fail","_always","arr_callOnce","arr","ctx","fn","fn_proxy","_isAsync","_resolved","_rejected","defer","resolve","always","reject","fail","resolveDelegate","rejectDelegate","then","onSuccess","onError","Sources","loadTranslation","xhr","response","resource","instance","ajax","resp","Data","XMLHttpRequest","onload","json","JSON","parse","responseText","error","open","send","single","data","many","pattern","onComplete","count","max","io","glob","readFiles","forEach","file","uri","getName","read","toLocalFile","sources__","config","mix","localizer","translation","extend","_cache","BrowserLocalizer","localizer__","fromReq","L_util_NODE","L_util_BROWSER","localize","parse_arguments","trim","model","ctr","charCodeAt","evalStatements__","comma","Utils","Expression","evalStatements","registerUtil","middleware","res","next"],"mappings":"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","sourceRoot":"localization.js"}