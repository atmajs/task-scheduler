{"version":3,"file":"localization.js","sources":["d:/atma/i18n/lib/localization.js"],"names":["root","factory","_global","_exports","exports","global","window","$L","module","this","rgx_find","str","rgx","groupNumber","match","exec","Deferred","NodeLocalizer","console","warn","localizer_create","lang_SUPPORT","_Array_slice","Array","prototype","slice","is_Browser","document","is_Node","include","atma","mask","Class","require","__format","Formatter","$utils","format","Error","obj_getProperty","obj_setProperty","obj_extend","obj","property","chain","split","imax","length","i","value","key","target","source","val","log_error","args","call","arguments","unshift","log","apply","detect_fromBrowser","detect_fromRequest","fromSearch","search","lang","location","navigator","language","toLowerCase","lang_contains","req","langs","queryIndex","url","indexOf","substring","headers","replace","index","x","array","lang_extend","lang_tryLoad","languages","isoCode","translations","callback","params","route","support","path","SourceFactory","loadSingle","done","loadAll","dfr_bind","dfr","arguments_","listeners","push","dfr_clearListeners","_done","_fail","_always","arr_callOnce","arr","ctx","fn","fn_proxy","_isAsync","_resolved","_rejected","defer","resolve","always","reject","fail","resolveDelegate","rejectDelegate","then","onSuccess","onError","Sources","loadTranslation","xhr","response","resource","instance","ajax","resp","Data","XMLHttpRequest","onload","json","JSON","parse","responseText","error","open","send","single","data","many","pattern","onComplete","count","max","loadFromAtmaBackend","io","glob","readFiles","forEach","file","uri","getName","read","toLocalFile","sources__","config","mix","localizer","translation","extend","_json","stringify","_cache","BrowserLocalizer","localizer__","fromReq","L_util_NODE","L_util_BROWSER","localize","parse_arguments","trim","model","ctr","charCodeAt","evalStatements__","comma","Utils","Expression","evalStatements","registerUtil","resolveFromAtmaBackend","processJson","res","Lang","code","writeHead","Content-Length","Content-Type","end","middleware","next","jsonLang"],"mappings":"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"}