!function(t,n){debugger;function a(t){return l[t]||l.atma&&l.atma[t]}var e,i,r,l="undefined"!=typeof global?global:window;if(e=a("mask"),i=a("ruta"),r=a("include"),null==e)throw Error("MaskJS was not loaded");n(l,e,i,r,e.Compo.config.getDOMLibrary())}(this,function(t,n,a,e,i){var r,l;!function(){function t(t){return function(){n(t,arguments)}}function n(t,n){var a=_slice.call(n);a.unshift("a:tabs |"),console[t].apply(console,a)}r=t("error"),l=t("warn")}();var s;!function(){function t(a){if(a.type===n.Dom.NODE)return a;var e=a.controller;if(e&&e.prototype.tagName)return a;for(var i=jmask(),r=jmask(a).children(),l=r.length,s=0;l>s;s++)i.add(t(r[s]));return i}s=function(n){for(var a=jmask(),e=n.length,i=-1;++i<e;)a.add(t(n[i]));return a}}();var o;!function(){o=function(t,n){var a=".-tab-"+n;return null==t.$?s(jmask(t).children(a).children()):t.attr.anchors?i(t.$.find(".-tab-panels")[0]).find("a[name]"):i(t.$.find(".-tab-"+n+"s")[0]).children(a)}}();var h,c;!function(){h=function(t){var n=t&&t.req&&t.req.url;return null!=n?n:(n="undefined"!=typeof a?a.currentPath():null,null!=n?n:"undefined"!=typeof location?location.pathname:null)},c=function(t,n){var a=h(n),e=a.indexOf("?");-1!==e&&(a=a.substring(0,e)),47!==t.charCodeAt(0)&&(t="/"+t);var i=t.split("/"),r=i.length,l=i[r-1],s=a.split("/");if(r>s.length)return"-"!==l?l:null;for(var o=r-1;--o>-1&&"-"!==i[o];)if(i[o]!==s[o])return null;return s[r-1]}}();var u={"@tab":"\n		ul.nav.nav-tabs .-tab-headers >\n			@each (tab) >\n				@head\n					class=\"-tab-header ~[: $a.visible === '@tab.attr.name' ? 'active']\"\n					name='@tab.attr.name'\n					as=li {\n						a href='#' x-signal='click: changeTab' >\n							@placeholder;\n					}\n			\n		.tab-content.-tab-panels  >\n			@each (tab) >\n				@body\n					class=\"tab-pane -tab-panel  ~[: $a.visible === '@tab.attr.name' ? 'active']\"\n					name='@tab.attr.name'\n					as=div\n				;\n				\n		@show > :animation #show > @placeholder;\n		@hide > :animation #hide > @placeholder;\n	","@panel":"\n		.tab-content.-tab-panels  >\n			@each (panel) >\n				div class=\"tab-pane -tab-panel ~[: $a.visible === '@panel.attr.name' ? 'active']\"\n					name='@panel.attr.name' >\n						@placeholder;\n						\n		@show > :animation #show > @placeholder;\n		@hide > :animation #hide > @placeholder;\n	"},d=n.Compo({meta:{attributes:{"?x-route":"string","?x-visible":"string","?x-anchors":"boolean","?x-scrollbar":"boolean"}},tagName:"div",attr:{"class":"-tabs"},slots:{changeTab:function(t){t.preventDefault(),t.stopPropagation();var n=i(t.currentTarget).closest(".-tab-header");if(!n.hasClass("active")){var a=n.attr("name");return null==a?void r("`changeTab` - name attribute not found"):(this.setActive(a),this.$.trigger("change",a),[this,a])}}},onRenderStart:function(t,a){var e=jmask(this.nodes).tag(),i=u[e];if(null==i)return r("Root Template is not defined for",e),void l("Support `@tab{@head;@body}` , `@panel`");if(this.nodes=n.merge(i,this.nodes),(this.xScrollbar||this.xAnchors)&&(this.attr["class"]+=" scrollbar"),this.xRoute&&(this.attr["x-route"]=null,this.attr.visible=c(this.xRoute,a)),this.xAnchors){var h=jmask(this).children(".-tab-panels").children(),d=s(h);if(0===d.length)return void r("Has no elements in @panels tag");d.addClass("active")}null==this.xAnchors&&null==this.attr.visible&&(this.attr.visible=o(this,"panels").eq(0).attr("name"))},onRenderEndServer:function(t){if(this.attr.visible&&null==this.xScrollbar){var n='[name="'+this.attr.visible+'"].-tab-panel',a=t[0].querySelector(n);if(null==a)return void r("Not Found: ",n);a.classList.add("active")}},onRenderEnd:function(t,n,e){var i=this;this.attr.scrollbar&&(this.scroller=this.closest(":scroller"),this.scroller.on("scroll","",this._scrolled.bind(this))),this.xRoute&&a.add("^/",function(){var t=c(i.xRoute,e);i.setActive(t)})},animate:function(t,n,a){if(null!=n){var e=this._getAnimation(t);null!=e&&e.start(a,n)}},_getAnimation:function(t){if(null==this.components)return null;for(var n,a,e=0,i=this.components.length;i>e;e++)if(a=this.components[e],":animation"===a.compoName&&t===a.attr.id){n=a;break}return n},_hide:function(t){if(0!==t.length){var n=this._getAnimation("hide");return null==n?void t.removeClass("active"):void n.start(function(){t.removeClass("active")},t[0])}},_show:function(t){return 0===t.length?void(this.attr.visible=""):(t.addClass("active"),void this.animate("show",t[0]))},_scrolled:function(){for(var t,n=this.scroller.$[0].scrollTop+(this.attr.dtop<<0),a=o(this,"panel"),e=null,i=null,r=0,l=a.length;l>r;r++)t=a[r],null!=e?Math.abs(t.offsetTop-n)<e&&(e=n-t.offsetTop,i=t):(e=n-t.offsetTop,i=t);var s=i.getAttribute("name");s&&this.attr.visible!==s&&(this.attr.visible=s,this.emitOut("-tabChanged",s))},_scrollInto:function(t){this.scroller.scroller.scrollToElement(t[0])},setActive:function(t){if(this.attr.visible!==t){this.attr.visible=t;var n=o(this,"panel"),a=o(this,"header"),e=n.filter('[name="'+t+'"]');if(this.attr.scrollbar){if(0==e.length)return void r("Panel not found",t);this._scrollInto(e)}else{if(e.hasClass("active"))return;this._hide(n.filter(".active")),this._show(e)}a.removeClass("active").filter('[name="'+t+'"]').addClass("active")}},has:function(t){return 0!==o(this,"panel").filter('[name="'+t+'"]').length},getActiveName:function(){return this.attr.visible},getList:function(){for(var t,n,a=[],e=o(this,"panel"),i=0,r=e.length;r>i;i++)n=e[i],t=null,n.getAttribute&&(t=n.getAttribute("name")),t||(t=n.attr&&n.attr.name),a.push(t);return a}});n.registerHandler("a:tabs",d)});
//# sourceMappingURL=tabs.min.js.map